{% extends "base.html" %}

{% block title %}Mood Journal - DC Well Being{% endblock %}

{% block content %}
<div class="space-y-8">
    <!-- Header -->
    <div class="flex justify-between items-center">
        <div>
            <h1 class="text-3xl font-bold text-white mb-2">Mood Journal</h1>
            <p class="text-slate-400">Track your daily thoughts and feelings</p>
        </div>

        <!-- Streak Counter -->
        <div class="glass-card px-6 py-3 rounded-2xl flex items-center gap-3">
            <div class="w-10 h-10 rounded-full bg-orange-500/20 flex items-center justify-center text-orange-400">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z" />
                </svg>
            </div>
            <div>
                <div class="text-2xl font-bold text-white">{{ streak }}</div>
                <div class="text-xs text-slate-400 uppercase tracking-wider">Day Streak</div>
            </div>
        </div>
    </div>

    <!-- New Entry Form -->
    <div class="glass-card rounded-3xl p-6">
        <h3 class="text-xl font-semibold text-white mb-4">New Entry</h3>
        <form method="POST" class="space-y-4">
            <div>
                <label class="block text-sm font-medium text-slate-300 mb-2">How are you feeling?</label>
                <div class="flex gap-4">
                    {% for m in ['Happy', 'Calm', 'Neutral', 'Stressed', 'Anxious', 'Sad'] %}
                    <label class="cursor-pointer">
                        <input type="radio" name="mood" value="{{ m.lower() }}" class="peer sr-only" {% if m=='Neutral'
                            %}checked{% endif %}>
                        <div
                            class="px-4 py-2 rounded-xl border border-white/10 bg-slate-800/50 text-slate-400 peer-checked:bg-kiro-teal peer-checked:text-white peer-checked:border-transparent transition-all hover:bg-slate-700">
                            {{ m }}
                        </div>
                    </label>
                    {% endfor %}
                </div>
            </div>

            <div>
                <label class="block text-sm font-medium text-slate-300 mb-2">What's on your mind?</label>
                <textarea name="content" rows="4"
                    class="w-full rounded-xl bg-slate-800/50 border border-white/10 text-white p-4 focus:ring-2 focus:ring-kiro-teal focus:border-transparent"
                    placeholder="Write about your day, thoughts, or feelings..."></textarea>
            </div>

            <div class="flex justify-end">
                <button type="submit" class="btn-gradient px-8 py-3 rounded-xl font-semibold text-white">
                    Save Entry
                </button>
            </div>
        </form>
    </div>

    <!-- Past Entries -->
    <div class="space-y-4">
        <h3 class="text-xl font-semibold text-white">Recent Entries</h3>
        {% if entries %}
        {% for entry in entries %}
        <div class="glass-card rounded-2xl p-6 border-l-4 
                {% if entry.mood == 'happy' or entry.mood == 'calm' %}border-emerald-500
                {% elif entry.mood == 'stressed' or entry.mood == 'anxious' %}border-orange-500
                {% elif entry.mood == 'sad' %}border-blue-500
                {% else %}border-slate-500{% endif %}">
            <div class="flex justify-between items-start mb-2">
                <div class="flex items-center gap-3">
                    <span class="px-3 py-1 rounded-full text-xs font-medium bg-white/10 text-white uppercase">{{
                        entry.mood }}</span>
                    <span class="text-sm text-slate-400">{{ entry.date.strftime('%B %d, %Y at %H:%M') }}</span>
                </div>
            </div>
            <p class="text-slate-300 leading-relaxed">{{ entry.content }}</p>
        </div>
        {% endfor %}
        {% else %}
        <div class="text-center py-12 text-slate-500">
            <p>No entries yet. Start your journaling journey today!</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}